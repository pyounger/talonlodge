(function(e){function t(t){var n=t.data.selected;var r=t.data.options;var i=navigator.userAgent.toLowerCase().indexOf("mobile")>0;var s=e(window).height();var o=n.outerHeight(true);var u=e(document).scrollTop();if(!i&&u<=e(document).height()-s&&u>n.offset().top-r.topPadding){var a=0;if(r.topPadding!="undefined"){a=a+r.topPadding}var f=n.offset().left;n.data("PanelsTop",n.offset().top-a);if(r.savePanelSpace==true){var l=n.outerWidth(true);var c=n.css("float");var h=n.css("display");var p=Math.ceil(Math.random()*9999);n.data("PanelSpaceID","stickyPanelSpace"+p);n.before("<div id='"+n.data("PanelSpaceID")+"' style='width:"+l+"px;height:"+o+"px;float:"+c+";display:"+h+";'>&nbsp;</div>")}if(r.afterDetachCSSClass!=""){n.addClass(r.afterDetachCSSClass)}n.data("Original_Inline_CSS",!n.attr("style")?"":n.attr("style"));n.css({margin:0,left:f,top:a,position:"fixed"})}if(u<=n.data("PanelsTop")&&n.css("top")!="auto"){if(r.savePanelSpace==true){e("#"+n.data("PanelSpaceID")).remove()}n.attr("style",n.data("Original_Inline_CSS"));if(r.afterDetachCSSClass!=""){n.removeClass(r.afterDetachCSSClass)}}}e.fn.stickyPanel=function(n){var n=e.extend({},e.fn.stickyPanel.defaults,n);return this.each(function(){e(window).bind("scroll.stickyPanel",{selected:e(this),options:n},t)})};e.fn.stickyPanel.defaults={topPadding:0,afterDetachCSSClass:"",savePanelSpace:false}})(jQuery)