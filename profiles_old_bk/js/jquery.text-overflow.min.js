(function(e){var t=document.documentElement.style,n="textOverflow"in t||"OTextOverflow"in t,r=function(t,n){var r=0,i=[],s=function(t){var o=0,u;if(r>n){return}for(o=0;o<t.length;o+=1){if(t[o].nodeType===1){u=t[o].cloneNode(false);i[i.length-1].appendChild(u);i.push(u);s(t[o].childNodes);i.pop()}else{if(t[o].nodeType===3){if(r+t[o].length<n){i[i.length-1].appendChild(t[o].cloneNode(false))}else{u=t[o].cloneNode(false);u.textContent=e.trim(u.textContent.substring(0,n-r));i[i.length-1].appendChild(u)}r+=t[o].length}else{i.appendChild(t[o].cloneNode(false))}}}};i.push(t.cloneNode(false));s(t.childNodes);return e(i.pop().childNodes)};e.extend(e.fn,{textOverflow:function(t,i){var s=t||"&#x2026;";if(!n){return this.each(function(){var n=e(this),o=n.clone(),u=n.clone(),l=n.text(),h=n.width(),p=0,d=0,v=l.length,m=function(){if(h!==n.width()){n.replaceWith(u);n=u;u=n.clone();n.textOverflow(t,false);h=n.width()}};n.after(o.hide().css({position:"absolute",width:"auto",overflow:"visible","max-width":"inherit"}));if(o.width()>h){while(p<v){d=Math.floor(p+(v-p)/2);o.empty().append(r(u.get(0),d)).append(s);if(o.width()<h){p=d+1}else{v=d}}if(p<l.length){n.empty().append(r(u.get(0),p-1)).append(s)}}o.remove();if(i){setInterval(m,200)}})}else{return this}}})})(jQuery)